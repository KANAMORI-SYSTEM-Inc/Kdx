<UserControl x:Class="KdxDesigner.Controls.CylinderListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5"
                    Visibility="{Binding ShowToolbar, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Button Content="ï¼‹ ã‚·ãƒªãƒ³ãƒ€ãƒ¼è¿½åŠ " Command="{Binding AddCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Width="120" Height="25" Margin="0,0,5,0"
                    Background="#2196F3" Foreground="White" FontWeight="Bold"
                    Visibility="{Binding ShowAddButton, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Button Content="ðŸ“‹ ã‚³ãƒ”ãƒ¼è¿½åŠ " Command="{Binding CopyCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Width="110" Height="25" Margin="0,0,5,0"
                    Background="#9C27B0" Foreground="White" FontWeight="Bold"
                    Visibility="{Binding ShowCopyButton, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Button Content="ç·¨é›†" Command="{Binding EditCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Width="80" Height="25" Margin="0,0,5,0"
                    Visibility="{Binding ShowEditButton, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Button Content="å‰Šé™¤" Command="{Binding DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Width="80" Height="25" Margin="0,0,5,0"
                    Visibility="{Binding ShowDeleteButton, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            <Button Content="æ›´æ–°" Command="{Binding RefreshCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Width="80" Height="25" Margin="0,0,5,0"
                    Visibility="{Binding ShowRefreshButton, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </StackPanel>

        <!-- Search Box -->
        <Grid Grid.Row="1" Margin="0,0,0,5"
              Visibility="{Binding ShowSearchBox, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="æ¤œç´¢:" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBox Grid.Column="1"
                     Text="{Binding SearchText, RelativeSource={RelativeSource AncestorType=UserControl}, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,0,10,0"/>
            <Button Grid.Column="2" Content="ã‚¯ãƒªã‚¢" Width="60" Margin="0,0,10,0"
                    Command="{Binding ClearSearchCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </Grid>

        <!-- Cylinder DataGrid -->
        <DataGrid Grid.Row="2"
                  x:Name="CylinderGrid"
                  ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource AncestorType=UserControl}}"
                  SelectedItem="{Binding SelectedItem, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  CanUserSortColumns="True">
            <DataGrid.InputBindings>
                <MouseBinding MouseAction="LeftDoubleClick"
                              Command="{Binding DoubleClickCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
            </DataGrid.InputBindings>
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†(_E)" Command="{Binding EditCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                    <Separator/>
                    <MenuItem Header="å‰Šé™¤(_D)" Command="{Binding DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                </ContextMenu>
            </DataGrid.ContextMenu>
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="CYç•ªå·" Binding="{Binding CYNum}" Width="100"/>
                <DataGridTextColumn Header="æ©Ÿæ¢°å" Binding="{Binding MachineNameFullName}" Width="150"/>
                <DataGridTextColumn Header="PUCO" Binding="{Binding PUCO}" Width="80"/>
                <DataGridTextColumn Header="Go" Binding="{Binding Go}" Width="100"/>
                <DataGridTextColumn Header="Back" Binding="{Binding Back}" Width="100"/>
                <DataGridTextColumn Header="æ²¹ç•ªå·" Binding="{Binding OilNum}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
</UserControl>
