<Window x:Class="KdxDesigner.Views.Interlock.InterlockPrecondition2PropertiesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="前提条件2 プロパティ" Height="550" Width="700"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="前提条件2 (ProcessDetail選択)" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- プロセス有効 -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="プロセス有効:"/>
                    <CheckBox Grid.Column="1" IsChecked="{Binding IsEnableProcess}" VerticalAlignment="Center"/>
                </Grid>

                <!-- インターロックモード -->
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="インターロックモード:"/>
                    <TextBox Grid.Column="1" Text="{Binding InterlockMode, UpdateSourceTrigger=PropertyChanged}"/>
                </Grid>

                <!-- 検索 -->
                <Grid Margin="0,10,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="ProcessDetail検索:"/>
                    <TextBox Grid.Column="1" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             ToolTip="ID、名称、CycleIdで検索"/>
                </Grid>

                <!-- 開始詳細ID選択 -->
                <GroupBox Header="開始詳細ID (StartDetailId)" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="150"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5">
                            <TextBlock Text="選択中: " VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SelectedStartProcessDetail.Id, StringFormat='ID: {0}', FallbackValue='未選択'}"
                                       FontWeight="Bold" VerticalAlignment="Center"/>
                            <TextBlock Text=" - " VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SelectedStartProcessDetail.DetailName, FallbackValue=''}"
                                       VerticalAlignment="Center"/>
                            <Button Content="クリア" Command="{Binding ClearStartDetailCommand}"
                                    Margin="10,0,0,0" Padding="5,2"/>
                        </StackPanel>

                        <DataGrid Grid.Row="1"
                                  ItemsSource="{Binding FilteredProcessDetails}"
                                  SelectedItem="{Binding SelectedStartProcessDetail}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="名称" Binding="{Binding DetailName}" Width="*"/>
                                <DataGridTextColumn Header="CycleId" Binding="{Binding CycleId}" Width="60"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </GroupBox>

                <!-- 終了詳細ID選択 -->
                <GroupBox Header="終了詳細ID (EndDetailId)" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="150"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5">
                            <TextBlock Text="選択中: " VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SelectedEndProcessDetail.Id, StringFormat='ID: {0}', FallbackValue='未選択'}"
                                       FontWeight="Bold" VerticalAlignment="Center"/>
                            <TextBlock Text=" - " VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SelectedEndProcessDetail.DetailName, FallbackValue=''}"
                                       VerticalAlignment="Center"/>
                            <Button Content="クリア" Command="{Binding ClearEndDetailCommand}"
                                    Margin="10,0,0,0" Padding="5,2"/>
                        </StackPanel>

                        <DataGrid Grid.Row="1"
                                  ItemsSource="{Binding FilteredProcessDetails}"
                                  SelectedItem="{Binding SelectedEndProcessDetail}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="名称" Binding="{Binding DetailName}" Width="*"/>
                                <DataGridTextColumn Header="CycleId" Binding="{Binding CycleId}" Width="60"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- ボタン -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="OK" Width="80" Margin="5" Command="{Binding OkCommand}" IsDefault="True"/>
            <Button Content="キャンセル" Width="80" Margin="5" Command="{Binding CancelCommand}" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
