<Window
    x:Class="KdxDesigner.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:KdxDesigner.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utils="clr-namespace:KdxDesigner.Utils"
    xmlns:vm="clr-namespace:KdxDesigner.ViewModels"
    Title="KDX Designer - ãƒ©ãƒ€ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ è‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ "
    Width="1920"
    Height="1000"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_ãƒ•ã‚¡ã‚¤ãƒ«">
                <MenuItem Command="{Binding OpenSettingsCommand}" Header="è¨­å®šã‚’é–‹ã" />
                <MenuItem Command="{Binding OpenProjectInfoCommand}" Header="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ç®¡ç†" />
                <Separator />
                <MenuItem Command="{Binding SignOutCommand}" Header="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ" />
                <MenuItem Command="{Binding ExitCommand}" Header="çµ‚äº†" />
            </MenuItem>
            <MenuItem Header="_ãƒ„ãƒ¼ãƒ«">
                <MenuItem Command="{Binding OpenIoEditorCommand}" Header="IOãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç†" />
                <MenuItem Command="{Binding OpenIOConversionWindowCommand}" Header="IOå‰²ä»˜è¡¨å¤‰æ›" />
                <MenuItem Command="{Binding OpenLinkDeviceManagerCommand}" Header="ãƒªãƒ³ã‚¯ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†" />
                <MenuItem Command="{Binding OpenTimerEditorCommand}" Header="ã‚¿ã‚¤ãƒžãƒ¼è¨­å®š" />
                <!--  TODO: MemoryProfileManagerViewã‚’ä½œæˆå¾Œã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤  -->
                <!-- <MenuItem Header="ãƒ¡ãƒ¢ãƒªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†" Command="{Binding OpenMemoryProfileManagerCommand}" /> -->
                <MenuItem Command="{Binding OpenControllBoxViewCommand}" Header="æ“ä½œç›¤é¸æŠž" />
                <MenuItem Command="{Binding OpenCylinderManagementCommand}" Header="ã‚·ãƒªãƒ³ãƒ€ãƒ¼ç®¡ç†" />
                <Separator />
                <MenuItem Command="{Binding OpenProcessFlowDetailCommand}" Header="å·¥ç¨‹ãƒ•ãƒ­ãƒ¼è©³ç´°" />
                <MenuItem Command="{Binding CloseAllProcessFlowWindowsCommand}" Header="å…¨ã¦ã®å·¥ç¨‹ãƒ•ãƒ­ãƒ¼è©³ç´°ã‚’é–‰ã˜ã‚‹" />
                <Separator />
                <MenuItem Command="{Binding OpenAuditLogViewCommand}" Header="å¤‰æ›´å±¥æ­´" />
            </MenuItem>
            <MenuItem Header="_ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ">
                <MenuItem Header="{Binding CurrentUserEmail}" IsEnabled="False" />
                <Separator />
                <MenuItem Command="{Binding SignOutCommand}" Header="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ" />
            </MenuItem>
        </Menu>

        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <GroupBox
                Grid.Row="0"
                Margin="0,0,0,5"
                Padding="5"
                Header="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠž">
                <Grid Margin="2" ShowGridLines="False">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="0"
                        Orientation="Vertical">
                        <StackPanel HorizontalAlignment="Left">
                            <TextBlock VerticalAlignment="Center" FontWeight="Bold"><Run Text="Compan" /><Run Language="ja-jp" Text="y" /></TextBlock>
                            <ComboBox
                                Width="200"
                                Margin="0,5,0,0"
                                DisplayMemberPath="CompanyName"
                                ItemsSource="{Binding Companies}"
                                SelectedItem="{Binding SelectedCompany}" />
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Left">
                            <TextBlock
                                Margin="0,5,0,0"
                                VerticalAlignment="Center"
                                FontWeight="Bold"
                                Text="Model" />
                            <ComboBox
                                Width="200"
                                Margin="0,5,0,0"
                                DisplayMemberPath="ModelName"
                                ItemsSource="{Binding Models}"
                                SelectedItem="{Binding SelectedModel}" />
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Left">
                            <TextBlock
                                Margin="0,5,0,0"
                                VerticalAlignment="Center"
                                FontWeight="Bold"
                                Text="PLC" />
                            <ComboBox
                                Width="200"
                                Margin="0,5,0,0"
                                DisplayMemberPath="PlcName"
                                ItemsSource="{Binding Plcs}"
                                SelectedItem="{Binding SelectedPlc}" />
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Left">
                            <TextBlock
                                Margin="0,5,0,0"
                                VerticalAlignment="Center"
                                FontWeight="Bold"
                                Text="Cycle" />
                            <ComboBox
                                Width="200"
                                Margin="0,0,0,0"
                                DisplayMemberPath="CycleName"
                                ItemsSource="{Binding Cycles}"
                                SelectedItem="{Binding SelectedCycle}" />
                        </StackPanel>

                    </StackPanel>

                    <StackPanel
                        Grid.Row="0"
                        Grid.RowSpan="2"
                        Grid.Column="1"
                        Margin="15,20,0,0"
                        HorizontalAlignment="Left"
                        Orientation="Vertical">
                        <Button
                            Width="100"
                            Command="{Binding OpenMemoryEditorCommand}"
                            Content="ãƒ¡ãƒ¢ãƒªç·¨é›†" />
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding MemorySettingCommand}"
                            Content="ãƒ¡ãƒ¢ãƒªè¨­å®š">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsMemoryConfigured}" Value="True">
                                            <Setter Property="Background" Value="#90EE90" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding OpenErrorMessageGeneratorCommand}"
                            Content="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
                            IsEnabled="{Binding IsMemoryConfigured}" />
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding OpenErrorMessageEditorCommand}"
                            Content="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç·¨é›†" />
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding ProcessOutputCommand}"
                            Content="å·¥ç¨‹å‡ºåŠ›"
                            IsEnabled="{Binding IsMemoryConfigured}" />
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding OpenProcessFlowDetailCommand}"
                            Content="å·¥ç¨‹ãƒ•ãƒ­ãƒ¼è©³ç´°" />
                        <Button
                            Width="100"
                            Margin="0,10,0,0"
                            VerticalAlignment="Center"
                            Command="{Binding OpenInterlockSettingsCommand}"
                            Content="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ­ãƒƒã‚¯è¨­å®š" />
                        <CheckBox
                            Margin="0,10,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Content="ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰"
                            IsChecked="{Binding IsDebug, Mode=TwoWay}" />
                    </StackPanel>
                </Grid>
            </GroupBox>

            <GroupBox Grid.Row="1" Header="å·¥ç¨‹ä¸€è¦§">
                <DockPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!--  è¿½åŠ ãƒœã‚¿ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼  -->
                        <StackPanel
                            Grid.Row="0"
                            Grid.Column="0"
                            Margin="5,0,5,5"
                            Orientation="Horizontal">
                            <Button
                                Width="120"
                                Height="25"
                                Margin="0,0,5,0"
                                Background="#FF9800"
                                Command="{Binding OpenProcessListWindowCommand}"
                                Content="ðŸ—” ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º"
                                FontWeight="Bold"
                                Foreground="White" />
                        </StackPanel>

                        <StackPanel
                            Grid.Row="0"
                            Grid.Column="1"
                            Margin="5,0,5,5"
                            Orientation="Horizontal">
                            <Button
                                Width="120"
                                Height="25"
                                Margin="0,0,5,0"
                                Background="#FF9800"
                                Command="{Binding OpenProcessDetailListWindowCommand}"
                                Content="ðŸ—” ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º"
                                FontWeight="Bold"
                                Foreground="White" />
                        </StackPanel>

                        <StackPanel
                            Grid.Row="0"
                            Grid.Column="2"
                            Margin="5,0,5,5"
                            Orientation="Horizontal">
                            <Button
                                Width="120"
                                Height="25"
                                Margin="0,0,5,0"
                                Background="#FF9800"
                                Command="{Binding OpenOperationListWindowCommand}"
                                Content="ðŸ—” ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º"
                                FontWeight="Bold"
                                Foreground="White" />
                        </StackPanel>

                        <!--  å·¥ç¨‹ä¸€è¦§ï¼ˆå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰  -->
                        <controls:ProcessListControl
                            x:Name="ProcessListControl"
                            Grid.Row="1"
                            Grid.Column="0"
                            Margin="5"
                            CycleId="{Binding SelectedCycle.Id}"
                            OpenProcessFlowDetailRequested="ProcessListControl_OpenProcessFlowDetailRequested"
                            PlcId="{Binding SelectedPlc.Id}"
                            ProcessCategories="{Binding ProcessCategories}"
                            ProcessSelectionChanged="ProcessListControl_ProcessSelectionChanged"
                            Processes="{Binding Processes, Mode=TwoWay}"
                            Repository="{Binding Repository}"
                            SelectedProcess="{Binding SelectedProcess, Mode=TwoWay}" />

                        <!--  å·¥ç¨‹è©³ç´°ä¸€è¦§ï¼ˆå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰  -->
                        <controls:ProcessDetailListControl
                            x:Name="ProcessDetailListControl"
                            Grid.Row="1"
                            Grid.Column="1"
                            Margin="5"
                            CycleId="{Binding SelectedCycle.Id}"
                            Operations="{Binding SelectedOperations}"
                            ProcessDetailCategories="{Binding ProcessDetailCategories}"
                            ProcessDetailSelectionChanged="ProcessDetailListControl_SelectionChanged"
                            ProcessDetails="{Binding ProcessDetails, Mode=TwoWay}"
                            ProcessId="{Binding SelectedProcess.Id}"
                            Repository="{Binding Repository}"
                            SelectedProcessDetail="{Binding SelectedProcessDetail, Mode=TwoWay}" />

                        <!--  æ“ä½œä¸€è¦§ï¼ˆå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰  -->
                        <controls:OperationListControl
                            x:Name="OperationListControl"
                            Grid.Row="1"
                            Grid.Column="2"
                            Margin="5"
                            CycleId="{Binding SelectedCycle.Id}"
                            OperationCategories="{Binding OperationCategories}"
                            Operations="{Binding SelectedOperations, Mode=TwoWay}"
                            PlcId="{Binding SelectedPlc.Id}"
                            Repository="{Binding Repository}"
                            SelectedOperation="{Binding SelectedOperation, Mode=TwoWay}" />
                    </Grid>
                </DockPanel>
            </GroupBox>
        </Grid>
    </DockPanel>
</Window>
